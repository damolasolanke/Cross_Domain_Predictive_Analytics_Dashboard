{% extends "base.html" %}

{% block title %}Supply Chain Optimization{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row mb-4">
        <div class="col-md-8 offset-md-2 text-center">
            <h1 class="display-5 fw-bold mb-3">Supply Chain Optimization</h1>
            <p class="lead mb-4">Predict inventory needs by combining weather forecasts, economic indicators, social media trends, and transportation metrics.</p>
        </div>
    </div>
    
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <img src="{{ url_for('static', filename='img/supply-chain-bg.jpg') }}" alt="Supply Chain Optimization" class="img-fluid rounded shadow-lg">
        </div>
    </div>
    
    <!-- Current Insights Section (Using the mock data) -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Current Insights</h3>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-4 mb-3">
                            <div class="p-3 border rounded bg-light">
                                <h5>Weather Conditions</h5>
                                <p class="display-6">{{ data.weather_forecast.condition }}</p>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 border rounded bg-light">
                                <h5>Economic Trend</h5>
                                <p class="display-6 text-capitalize">{{ data.economic_indicators.trend }}</p>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="p-3 border rounded bg-light">
                                <h5>Social Media Sentiment</h5>
                                <p class="display-6 text-capitalize">{{ data.social_media_trends.sentiment }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Inventory Insights Table -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Inventory Insights</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Current Stock</th>
                                    <th>Predicted Demand</th>
                                    <th>Confidence</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in data.inventory_insights %}
                                <tr>
                                    <td>{{ item.product }}</td>
                                    <td>{{ item.current_stock }}</td>
                                    <td>{{ item.predicted_demand }}</td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            <div class="progress-bar" role="progressbar" 
                                                style="width: {{ item.confidence * 100 }}%;" 
                                                aria-valuenow="{{ item.confidence * 100 }}" 
                                                aria-valuemin="0" 
                                                aria-valuemax="100">
                                                {{ (item.confidence * 100)|int }}%
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        {% if item.restock_recommendation > 0 %}
                                            <span class="badge bg-warning">Restock: +{{ item.restock_recommendation }}</span>
                                        {% else %}
                                            <span class="badge bg-success">Optimal</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Key Benefits Section -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-body p-4">
                    <h2 class="card-title mb-4">Key Benefits</h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="d-flex">
                                <div class="flex-shrink-0 text-primary">
                                    <i class="bi bi-check-circle-fill fs-4 me-2"></i>
                                </div>
                                <div>
                                    <h5>Reduce Stockouts by 35%</h5>
                                    <p>Anticipate demand spikes by correlating weather events, social media trends, and seasonal patterns.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex">
                                <div class="flex-shrink-0 text-primary">
                                    <i class="bi bi-check-circle-fill fs-4 me-2"></i>
                                </div>
                                <div>
                                    <h5>Lower Shipping Costs by 22%</h5>
                                    <p>Optimize transportation routes based on real-time weather conditions and traffic patterns.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex">
                                <div class="flex-shrink-0 text-primary">
                                    <i class="bi bi-check-circle-fill fs-4 me-2"></i>
                                </div>
                                <div>
                                    <h5>Improve Inventory Accuracy by 28%</h5>
                                    <p>Fine-tune order quantities through predictive analytics that combine multiple data sources.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex">
                                <div class="flex-shrink-0 text-primary">
                                    <i class="bi bi-check-circle-fill fs-4 me-2"></i>
                                </div>
                                <div>
                                    <h5>Increase Customer Satisfaction by 18%</h5>
                                    <p>Meet delivery expectations consistently through more accurate prediction of logistics challenges.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cross-Domain Correlations -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Cross-Domain Correlations</h3>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Factor 1</th>
                                    <th>Factor 2</th>
                                    <th>Strength</th>
                                    <th>Correlation</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for item in data.correlations %}
                                <tr>
                                    <td>{{ item.factor1 }}</td>
                                    <td>{{ item.factor2 }}</td>
                                    <td>{{ item.strength|capitalize }}</td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            <div class="progress-bar" role="progressbar" 
                                                style="width: {{ item.correlation * 100 }}%;" 
                                                aria-valuenow="{{ item.correlation * 100 }}" 
                                                aria-valuemin="0" 
                                                aria-valuemax="100">
                                                {{ (item.correlation * 100)|int }}%
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Logistics Data Section -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">Logistics Overview</h3>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-12 text-center">
                            <div class="p-3 border rounded bg-light mb-3">
                                <h5>Average Shipping Time</h5>
                                <p class="display-4">{{ data.logistics_data.average_shipping_time }} days</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <h4 class="mb-3">Shipping Delays</h4>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Region</th>
                                            <th>Delay</th>
                                            <th>Cause</th>
                                            <th>Affected Routes</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for delay in data.logistics_data.shipping_delays %}
                                        <tr>
                                            <td>{{ delay.region }}</td>
                                            <td>
                                                {% if delay.delay_hours >= 24 %}
                                                    <span class="badge bg-danger">{{ delay.delay_hours }} hours</span>
                                                {% elif delay.delay_hours >= 8 %}
                                                    <span class="badge bg-warning">{{ delay.delay_hours }} hours</span>
                                                {% else %}
                                                    <span class="badge bg-success">{{ delay.delay_hours }} hours</span>
                                                {% endif %}
                                            </td>
                                            <td>{{ delay.cause }}</td>
                                            <td>{{ delay.affected_routes }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <h4 class="mb-3">Warehouse Capacity</h4>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Location</th>
                                            <th>Capacity Used</th>
                                            <th>Items Processed</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for warehouse in data.logistics_data.warehouse_capacity %}
                                        <tr>
                                            <td>{{ warehouse.location }}</td>
                                            <td>
                                                <div class="progress" style="height: 20px;">
                                                    <div class="progress-bar {% if warehouse.capacity_used > 0.9 %}bg-danger{% elif warehouse.capacity_used > 0.8 %}bg-warning{% else %}bg-success{% endif %}" 
                                                        role="progressbar" 
                                                        style="width: {{ warehouse.capacity_used * 100 }}%;" 
                                                        aria-valuenow="{{ warehouse.capacity_used * 100 }}" 
                                                        aria-valuemin="0" 
                                                        aria-valuemax="100">
                                                        {{ (warehouse.capacity_used * 100)|int }}%
                                                    </div>
                                                </div>
                                            </td>
                                            <td>{{ warehouse.items_processed_daily }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- How It Works Section -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="card dashboard-card">
                <div class="card-body p-4">
                    <h2 class="card-title mb-4">How It Works</h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <h4>Data Integration</h4>
                            <p>Our system integrates data from multiple domains:</p>
                            <ul>
                                <li>Weather forecasts and historical patterns</li>
                                <li>Economic indicators like consumer confidence and spending</li>
                                <li>Transportation metrics including shipping times and costs</li>
                                <li>Social media trend analysis for consumer sentiment</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h4>Predictive Analytics</h4>
                            <p>Our advanced machine learning models:</p>
                            <ul>
                                <li>Identify correlations between seemingly unrelated data</li>
                                <li>Generate demand forecasts with confidence intervals</li>
                                <li>Predict potential shipping delays and disruptions</li>
                                <li>Recommend optimal inventory levels and reorder points</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Call to Action -->
    <div class="row mt-5">
        <div class="col-md-8 offset-md-2 text-center">
            <h2 class="mb-4">Ready to optimize your supply chain?</h2>
            <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                <a href="/dashboard" class="btn btn-primary btn-lg px-4 me-sm-3">Explore Dashboard</a>
                <a href="/nlq" class="btn btn-outline-primary btn-lg px-4">Try Natural Language Queries</a>
            </div>
        </div>
    </div>
</div>
{% endblock %} 